---
title: Validate Wizard
description: Validate SCC configuration files before deployment
sidebar:
  order: 5
---

import { Aside, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

The validate wizard checks SCC configuration files for schema compliance and basic semantic checks.
When SCC CLI is available, it reports the CLI's validation output directly.

## Quick Start

```
/scc-wizard:validate path/to/org-config.json
```

Or run without a path to search common locations.

## Validation Pipeline

When the CLI is available, validation follows SCC's current enforcement:

1. **Schema validation** - JSON structure compliance
2. **Basic semantic check** - `organization.default_profile` references an existing team (org configs only)

When the CLI isn't available, the wizard performs schema validation and may surface
**advisory** checks (allowlists, delegation, stdio MCP) to prevent runtime surprises.

## Using SCC CLI

When available, the wizard prefers native SCC validation:

```bash
# For org configs
scc org validate org-config.json

# For team configs
scc team validate --file team-config.json
```

<Aside type="tip">
The SCC CLI provides the most accurate validation. The wizard falls back to static checks when CLI isn't available.
</Aside>

## Error Categories (CLI-enforced)

### Schema Errors

JSON Schema violations that make the config invalid:

```
SCHEMA ERROR: Invalid organization.id format
  Path: organization.id
  Expected: lowercase letters, numbers, hyphens only
  Found: "Acme Corp"
  Fix: Use "acme-corp" instead
```

**Common schema errors:**
- Missing required fields (`schema_version`, `organization.name`, `organization.id`)
- Invalid `organization.id` pattern (must match `^[a-z0-9-]+$`)
- Wrong field types
- Invalid enum values

### Org Default Profile Errors

If `organization.default_profile` points to a team that doesn't exist, validation fails:

```
DEFAULT_PROFILE ERROR: default_profile "backend" not found in profiles
  Fix: Update default_profile or add the team to profiles
```

## Wizard Advisory Checks (not enforced by SCC CLI)

These warnings help catch runtime denials, but do not block `scc org validate` today:

- allowlist/delegation mismatches for plugins or MCP servers
- blocked plugins present in defaults
- stdio MCP requirements (allow_stdio_mcp + absolute command path)
- network_policy and session.auto_resume advisories

## Results Format

```markdown
## Validation Results for: org-config.json

Config type: Org config

### Errors (CLI-enforced)

1. SCHEMA ERROR: ...
2. DEFAULT_PROFILE ERROR: ...

### Warnings (advisory)

1. WARNING: ...

### Summary

- Errors: 2
- Warnings: 1
- Status: INVALID
```

## Common Fixes

These fixes address advisory warnings and common runtime denials.

### "Plugin not in allowlist"

<Tabs>
  <TabItem label="Add to allowlist">
  ```json
  {
    "defaults": {
      "allowed_plugins": ["*@sandboxed-code-official", "custom-*"]
    }
  }
  ```
  </TabItem>
  <TabItem label="Remove from team">
  Remove the plugin from `profiles.<team>.additional_plugins`
  </TabItem>
  <TabItem label="Move to defaults">
  Add to `defaults.enabled_plugins` if all teams need it
  </TabItem>
</Tabs>

### "Invalid plugin reference"

```json
// Wrong
"enabled_plugins": ["scc-safety-net"]

// Correct
"enabled_plugins": ["scc-safety-net@sandboxed-code-official"]
```

### "Marketplace not found"

Ensure the marketplace is defined:

```json
{
  "marketplaces": {
    "sandboxed-code-official": {
      "source": "github",
      "owner": "CCimen",
      "repo": "sandboxed-code-plugins"
    }
  }
}
```

## CI Integration

Run validation in CI pipelines:

```bash
# Validate org config
scc org validate org-config.json
if [ $? -ne 0 ]; then
  echo "Org config validation failed"
  exit 1
fi

# Validate team configs
for config in teams/*/team-config.json; do
  scc team validate --file "$config"
  if [ $? -ne 0 ]; then
    echo "Team config validation failed: $config"
    exit 1
  fi
done
```

<Aside type="tip">
Add config validation as a required check on pull requests to catch errors before merge.
</Aside>

## See Also

- [Org Schema Reference](/reference/configuration/org-schema)
- [Team Schema Reference](/reference/configuration/team-schema)
- [Explain Wizard](/guides/wizard/explain-wizard)
